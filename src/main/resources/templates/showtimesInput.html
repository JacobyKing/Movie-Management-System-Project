<html xmlns:th="http://www.thymeleaf.org">
<head>
	<meta charset="UTF-8">
	<title>Input Showtime</title>
	<script>
		function validateFields(){
			
			let movieNameField = document.querySelector("input[name = 'movieName']");
			let timeField = document.querySelector("input[name = 'time']");
			let errorMessage = "";
			movieNameField.style.backgroundColor = "#FFFFFF";
			timeField.style.backgroundColor = "#FFFFFF";
			if(movieNameField.value == ""){
				errorMessage += "Movie Name field is empty";
				movieNameField.style.backgroundColor = "#E55D40";
				event.preventDefault();
			}
			//We can change this but as of now, the theater is open from 8 AM - 10 PM
			if(timeField.value == "" || (parseInt(timeField.value.substring(0, 2)) < 8 || parseInt(timeField.value.substring(0, 2)) > 22)){
				timeField.style.backgroundColor = "#E55D40";
				event.preventDefault();
				if(errorMessage == ""){
					errorMessage += "The theater is not open during that time";
				}
				else{
					errorMessage += " and the theater is not open during that time";
				}
			}
			document.querySelector('span').innerHTML = errorMessage;
		}
	</script>
</head>
<body>
	<form th:object="${newShowtime}" th:action="@{/addShowtime}" method=POST>
		Movie Name: <input name="movieName" size="20" th:field="*{movieName}"> <br />
		Showtime: <input type="time" name="time" th:field="*{time}"><br />
		<!-- We can change this but as of now, only theaters 1 - 8 are valid theaters -->
		Theater Number: <input type="number" name="theaterNumber" size="10" th:field="*{theaterNumber}" min="1" max="8" onchange="if(value<1){value=1;} else if(value>8){value=8;}"><br/>
		<!-- We can change this but as of now, a specific showtimes can only be initialized with 1 - 60 available tickets -->
		Tickets Available: <input type="number" name="ticketsAvailable" size="5" th:field="*{ticketsAvailable}" min="1" max="60" onchange="if(value<1){value=1;} else if(value>60){value=60;}"><br />
		<input name="submit" type="submit" value="submit" onclick="validateFields()"/> <!-- !! update/{id}(id=${newShowtime.id}) -->
		<script>
			document.querySelector("input[name = 'theaterNumber']").value = 1;
			document.querySelector("input[name = 'ticketsAvailable']").value = 1;
		</script>
	</form>
	<span></span><br>
	<a href="viewShowtimes">View Showtimes</a>
</body>
</html>